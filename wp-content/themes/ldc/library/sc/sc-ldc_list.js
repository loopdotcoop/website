// Generated by CoffeeScript 1.9.2
(function() {
  var $, Main, ª;

  ª = console.log.bind(console);

  $ = jQuery;

  Main = (function() {
    function Main(config) {
      var M;
      M = "/library/sc/sc-ldc_list.litcoffee Main()\n  ";
      if ('function' !== typeof $) {
        throw Error(M + "No jQuery");
      }
      this.$$listWraps = $('.ldc-list-wrap');
      if (0 === this.$$listWraps.length) {
        ª(M + "Warning: no '.ldc-list-wrap' elements found");
      }
      this.$$listings = $('.ldc-listing');
      if (0 === this.$$listings.length) {
        ª(M + "Warning: no '.ldc-listing' elements found");
      }
      this.initListings();
      this.initListPosts();
    }

    Main.prototype.initListings = function() {
      var main;
      main = this;
      this.$$listings.each(function() {
        var $listingWrap;
        $listingWrap = $(this);
        $listingWrap.data('ldc-width', $listingWrap.width());
        return main.resizePosts($listingWrap);
      });
      return $(window).on('resize', function() {
        return main.$$listings.each(function() {
          var $listingWrap;
          $listingWrap = $(this);
          if ($listingWrap.width() !== $listingWrap.data('ldc-width')) {
            $listingWrap.data('ldc-width', $listingWrap.width());
            return main.resizePosts($listingWrap);
          }
        });
      });
    };

    Main.prototype.resizePosts = function($listingWrap) {
      return $('.ldc-list-post', $listingWrap).each(function() {
        var $post, aspectRatio;
        $post = $(this);
        aspectRatio = $post.attr('data-ldc-aspect-ratio' || 1);
        return $post.height($post.width() * aspectRatio);
      });
    };

    Main.prototype.initListPosts = function() {
      var main;
      main = this;
      $('.ldc-list-post', this.$$listWraps).off('click', this.onListPostClick);
      return $('.ldc-list-post', this.$$listWraps).on('click', this.onListPostClick);
    };

    Main.prototype.onListPostClick = function() {
      $('.ldc-list-wrap .ldc-list-post').removeClass('ldc-focus');
      return $(this).addClass('ldc-focus');
    };

    return Main;

  })();

  $(function() {
    return new Main;
  });

}).call(this);
